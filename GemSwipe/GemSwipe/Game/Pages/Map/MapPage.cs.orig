using System.Threading.Tasks;
using GemSwipe.Data.PlayerData;
<<<<<<< HEAD
=======
using GemSwipe.Data.PlayerLife;
using GemSwipe.Game.Effects.BackgroundEffects;
using GemSwipe.Game.Gestures;
using GemSwipe.Game.Models;
using GemSwipe.Game.Navigation;
>>>>>>> life service and display
using GemSwipe.Game.Navigation.Pages;

namespace GemSwipe.Game.Pages.Map
{
    public class MapPage : PageBase
    {
        private Map _map;
        private PlayerLifeDisplayer _playerLifeDisplayer;

        public MapPage()
        {
            _map = new Map(0, 0, Height, Width);
            AddChild(_map);

            _playerLifeDisplayer = new PlayerLifeDisplayer(0,height-height/10,height,width);
            _map.GetLifeDisplayer(_playerLifeDisplayer);
            AddChild(_playerLifeDisplayer);
        }

        protected override void Draw()
        {
        }

        protected override void OnActivated(object parameter = null)
        {
            // Get latest player informations
            _map.UpdateLevelStatus();

            _playerLifeDisplayer.UpdateLifeCount();
            
            Task.Run(async () =>
            {
                await Task.Delay(1000);
            });
        }
        protected override void OnDeactivated()
        {
        }
    }
}
